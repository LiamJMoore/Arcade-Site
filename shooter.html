<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Paper Hands Shooter | RoastMe.fun</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        body { background: #050201; color: white; font-family: 'Press Start 2P', cursive; overflow: hidden; touch-action: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }
        canvas { background: #0f0502; border: 2px solid #f97316; box-shadow: 0 0 30px rgba(249, 115, 22, 0.2); }
        .ui { position: absolute; top: 20px; left: 20px; color: #f97316; z-index: 10; font-size: 14px; }
        #game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); text-align: center; background: rgba(0,0,0,0.9); padding: 40px; border: 4px solid #ef4444; border-radius: 12px; display: none; }
        .btn { background: #f97316; color: black; border: none; padding: 15px 30px; font-family: inherit; margin-top: 20px; cursor: pointer; }
        /* Touch Controls */
        .touch-zone { position: absolute; bottom: 0; height: 50%; width: 33%; z-index: 20; opacity: 0; }
        #left-zone { left: 0; } #right-zone { right: 0; } #fire-zone { left: 33%; width: 34%; }
    </style>
</head>
<body>
    <div class="ui">SCORE: <span id="score">0</span></div>
    
    <div id="game-container">
        <canvas id="canvas"></canvas>
        <div id="game-over">
            <h1 class="text-red-500 text-2xl mb-4">MARKET CRASHED</h1>
            <p class="text-xs text-gray-400 mb-6">The Jeets won. You are broke.</p>
            <button class="btn" onclick="location.reload()">BUY THE DIP</button>
            <br><br>
            <a href="arcade.html" class="text-xs text-gray-500 hover:text-white">EXIT TO LOBBY</a>
        </div>
        <div id="left-zone" class="touch-zone"></div>
        <div id="fire-zone" class="touch-zone"></div>
        <div id="right-zone" class="touch-zone"></div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Resize
        canvas.width = window.innerWidth > 600 ? 600 : window.innerWidth - 20;
        canvas.height = window.innerHeight > 800 ? 800 : window.innerHeight - 20;

        // Game State
        let score = 0;
        let gameOver = false;
        let frame = 0;

        // Entities
        const player = { x: canvas.width/2 - 20, y: canvas.height - 60, w: 40, h: 40, speed: 7, dx: 0, icon: "ðŸ‚" };
        let bullets = [];
        let enemies = [];
        let particles = [];

        // Controls
        let keys = {};
        window.addEventListener('keydown', e => {
            if(e.code === 'ArrowLeft') player.dx = -player.speed;
            if(e.code === 'ArrowRight') player.dx = player.speed;
            if(e.code === 'Space') shoot();
        });
        window.addEventListener('keyup', e => {
            if(e.code === 'ArrowLeft' || e.code === 'ArrowRight') player.dx = 0;
        });

        // Mobile
        document.getElementById('left-zone').ontouchstart = () => player.dx = -player.speed;
        document.getElementById('left-zone').ontouchend = () => player.dx = 0;
        document.getElementById('right-zone').ontouchstart = () => player.dx = player.speed;
        document.getElementById('right-zone').ontouchend = () => player.dx = 0;
        document.getElementById('fire-zone').ontouchstart = (e) => { e.preventDefault(); shoot(); };

        function shoot() {
            if(gameOver) return;
            bullets.push({ x: player.x + 15, y: player.y, w: 6, h: 15, speed: 10 });
        }

        function spawnEnemy() {
            const types = ["ðŸ§¢", "ðŸ¤¡", "ðŸ“‰"]; // Jeet, Clown, Red Candle
            const x = Math.random() * (canvas.width - 40);
            enemies.push({ 
                x: x, y: -40, w: 40, h: 40, 
                speed: 2 + (score/100), 
                type: types[Math.floor(Math.random()*types.length)] 
            });
        }

        function update() {
            if(gameOver) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Player
            player.x += player.dx;
            if(player.x < 0) player.x = 0;
            if(player.x > canvas.width - 40) player.x = canvas.width - 40;
            ctx.font = "40px Arial";
            ctx.fillText(player.icon, player.x, player.y + 35);

            // Bullets (Green Candles)
            bullets.forEach((b, i) => {
                b.y -= b.speed;
                ctx.fillStyle = "#22c55e";
                ctx.fillRect(b.x, b.y, b.w, b.h);
                // Wick
                ctx.fillStyle = "white";
                ctx.fillRect(b.x + 2, b.y - 4, 2, 4);
                if(b.y < 0) bullets.splice(i, 1);
            });

            // Enemies
            if(frame % 60 === 0) spawnEnemy();
            enemies.forEach((e, i) => {
                e.y += e.speed;
                ctx.font = "35px Arial";
                ctx.fillText(e.type, e.x, e.y + 35);

                // Collision Player
                if(e.y + e.h > player.y && e.x < player.x + player.w && e.x + e.w > player.x) {
                    endGame();
                }
                
                // Collision Bullet
                bullets.forEach((b, bi) => {
                    if(b.x < e.x + e.w && b.x + b.w > e.x && b.y < e.y + e.h && b.y + b.h > e.y) {
                        enemies.splice(i, 1);
                        bullets.splice(bi, 1);
                        score += 100;
                        document.getElementById('score').innerText = score;
                    }
                });

                if(e.y > canvas.height) endGame(); // Missed one = crash
            });

            frame++;
            requestAnimationFrame(update);
        }

        function endGame() {
            gameOver = true;
            document.getElementById('game-over').style.display = 'block';
        }

        update();
    </script>
</body>
</html>
